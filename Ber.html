<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Task Nexus Ultra</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --quantum-dark: #121212;
            --quantum-card: #1E1E1E;
            --quantum-text: #E0E0E0;
            --quantum-primary: #3498db;
            --quantum-success: #2ecc71;
            --quantum-danger: #e74c3c;
        }

        body {
            background: linear-gradient(135deg, var(--quantum-dark) 0%, #0a0a0a 100%);
            color: var(--quantum-text);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
        }

        .quantum-container {
            background: rgba(30, 30, 30, 0.9);
            border-radius: 15px;
            backdrop-filter: blur(15px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            padding: 30px;
            margin-top: 50px;
        }

        .task-item {
            background: rgba(40, 40, 40, 0.7);
            border-radius: 10px;
            margin-bottom: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .task-item:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .priority-badge {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .priority-low { background-color: #3498db; }
        .priority-medium { background-color: #f39c12; }
        .priority-high { background-color: #e74c3c; }

        .task-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .completed-task {
            opacity: 0.6;
            text-decoration: line-through;
        }

        .pomodoro-timer {
            background: rgba(50, 50, 50, 0.8);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="quantum-container">
            <h2 class="text-center mb-4">
                <i class="fas fa-brain me-2"></i>Quantum Task Nexus Ultra
            </h2>

            <!-- Pomodoro Timer -->
            <div class="row mb-3">
                <div class="col-md-12">
                    <div class="pomodoro-timer">
                        <h3 id="timerDisplay">25:00</h3>
                        <div class="btn-group" role="group">
                            <button id="startTimer" class="btn btn-success">
                                <i class="fas fa-play"></i> Start
                            </button>
                            <button id="pauseTimer" class="btn btn-warning">
                                <i class="fas fa-pause"></i> Pause
                            </button>
                            <button id="resetTimer" class="btn btn-danger">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                        <div class="mt-2">
                            <select id="timerType" class="form-select">
                                <option value="work">Work Session</option>
                                <option value="break">Short Break</option>
                                <option value="longBreak">Long Break</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced Task Input -->
            <div class="row mb-3">
                <div class="col-md-12">
                    <div class="input-group">
                        <input 
                            type="text" 
                            id="taskInput" 
                            class="form-control" 
                            placeholder="Enter a new task" 
                            maxlength="200"
                        >
                        <select id="prioritySelect" class="form-select" style="max-width: 150px;">
                            <option value="low">Low Priority</option>
                            <option value="medium">Medium Priority</option>
                            <option value="high">High Priority</option>
                        </select>
                        <input 
                            type="date" 
                            id="dueDateInput" 
                            class="form-control" 
                            style="max-width: 150px;"
                        >
                        <input 
                            type="text" 
                            id="tagsInput" 
                            class="form-control" 
                            placeholder="Tags (comma separated)"
                            style="max-width: 150px;"
                        >
                        <button 
                            id="addTaskBtn" 
                            class="btn btn-primary" 
                            type="button"
                        >
                            <i class="fas fa-plus"></i> Add Task
                        </button>
                    </div>
                </div>
            </div>

            <!-- Advanced Filtering -->
            <div class="row mb-3">
                <div class="col-md-6">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-light active filter-btn" data-filter="all">
                            All Tasks
                        </button>
                        <button type="button" class="btn btn-outline-light filter-btn" data-filter="active">
                            Active
                        </button>
                        <button type="button" class="btn btn-outline-light filter-btn" data-filter="completed">
                            Completed
                        </button>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="input-group">
                        <input 
                            type="text" 
                            id="searchInput" 
                            class="form-control" 
                            placeholder="🔍 Search tasks..."
                        >
                        <select id="tagFilterSelect" class="form-select" style="max-width: 150px;">
                            <option value="">All Tags</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Task List -->
            <div id="taskList" class="task-list"></div>

            <!-- Advanced Statistics -->
            <div class="row mt-3">
                <div class="col-md-3">
                    <div class="card bg-dark text-white">
                        <div class="card-body">
                            <h5 class="card-title">Total Tasks</h5>
                            <p id="totalTasksCount" class="card-text">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-dark text-white">
                        <div class="card-body">
                            <h5 class="card-title">Completed Tasks</h5>
                            <p id="completedTasksCount" class="card-text">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-dark text-white">
                        <div class="card-body">
                            <h5 class="card-title">Pending Tasks</h5>
                            <p id="pendingTasksCount" class="card-text">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-dark text-white">
                        <div class="card-body">
                            <h5 class="card-title">Productivity Score</h5>
                            <p id="productivityScore" class="card-text">0%</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    class QuantumTaskManagerUltra {
        constructor() {
            this.tasks = [];
            this.tags = new Set();
            this.pomodoroTimer = {
                workDuration: 25 * 60,
                shortBreakDuration: 5 * 60,
                longBreakDuration: 15 * 60,
                currentTime: 25 * 60,
                isRunning: false,
                timerInterval: null
            };
            this.initializeElements();
            this.loadTasks();
            this.renderTasks();
            this.setupEventListeners();
            this.updateTagFilter();
            this.initPomodoroTimer();
        }

        initPomodoroTimer() {
            const timerDisplay = this.elements.timerDisplay;
            const startBtn = this.elements.startTimer;
            const pauseBtn = this.elements.pauseTimer;
            const resetBtn = this.elements.resetTimer;
            const timerTypeSelect = this.elements.timerType;

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            const updateDisplay = () => {
                timerDisplay.textContent = formatTime(this.pomodoroTimer.currentTime);
            };

            const startTimer = () => {
                if (!this.pomodoroTimer.isRunning) {
                    this.pomodoroTimer.isRunning = true;
                    this.pomodoroTimer.timerInterval = setInterval(() => {
                        this.pomodoroTimer.currentTime--;
                        updateDisplay();

                        if (this.pomodoroTimer.currentTime <= 0) {
                            clearInterval(this.pomodoroTimer.timerInterval);
                            this.pomodoroTimer.isRunning = false;
                            
                            // Add notification or sound here
                            this.showTimerCompletionNotification();
                        }
                    }, 1000);
                }
            };

            const pauseTimer = () => {
                if (this.pomodoroTimer.isRunning) {
                    clearInterval(this.pomodoroTimer.timerInterval);
                    this.pomodoroTimer.isRunning = false;
                }
            };

            const resetTimer = () => {
                clearInterval(this.pomodoroTimer.timerInterval);
                this.pomodoroTimer.isRunning = false;

                const timerType = timerTypeSelect.value;
                switch(timerType) {
                    case 'work':
                        this.pomodoroTimer.currentTime = this.pomodoroTimer.workDuration;
                        break;
                    case 'break':
                        this.pomodoroTimer.currentTime = this.pomodoroTimer.shortBreakDuration;
                        break;
                    case 'longBreak':
                        this.pomodoroTimer.currentTime = this.pomodoroTimer.longBreakDuration;
                        break;
                }
                updateDisplay();
            };

            timerTypeSelect.addEventListener('change', () => {
                resetTimer();
            });

            startBtn.addEventListener('click', startTimer);
            pauseBtn.addEventListener('click', pauseTimer);
            resetBtn.addEventListener('click', resetTimer);

            // Initial setup
            resetTimer();
        }

        showTimerCompletionNotification() {
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    new Notification('Pomodoro Timer', {
                        body: 'Time is up! Take a break or start your next task.',
                        icon: 'path/to/icon.png'
                    });
                } else if (Notification.permission !== 'denied') {
                    Notification.requestPermission().then(permission => {
                        if (permission === 'granted') {
                            this.showTimerCompletionNotification();
                        }
                    });
                }
            }

            // Optional: Play a sound
            const audio = new Audio('path/to/completion-sound.mp3');
            audio.play();
        }

        // ... (rest of the previous implementation remains the same)

        calculateProductivityScore() {
            const totalTasks = this.tasks.length;
            const completedTasks = this.tasks.filter(task => task.completed).length;
            const score = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            
            this.elements.productivityScore.textContent = `${score}%`;
        }

        renderTasks() {
            // ... (previous implementation)

            // Add productivity score calculation
            this.calculateProductivityScore();
        }

        // Additional method for exporting tasks
        exportTasks() {
            const tasksJSON = JSON.stringify(this.tasks, null, 2);
            const blob = new Blob([tasksJSON], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `tasks_export_${new Date().toISOString()}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Method to import tasks
        importTasks(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const importedTasks = JSON.parse(e.target.result);
                    this.tasks = [...this.tasks, ...importedTasks];
                    this.saveTasks();
                    this.renderTasks();
                } catch (error) {
                    alert('Invalid task file');
                }
            };
            reader.readAsText(file);
        }

        // ... (rest of the previous implementation)
    }

    // Initialize the app
    document.addEventListener('DOMContentLoaded', () => {
        const taskManager = new QuantumTaskManagerUltra();
    });
    </script>
</body>
</html>
